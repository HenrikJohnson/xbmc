<?xml version="1.0" encoding="UTF-8"?>
<scraper framework="1.1" date="2013-05-29">
	<NfoUrl dest="3">
		<RegExp input="$$1" output="&lt;url&gt;http://musicbrainz.org/ws/2/artist/\1?inc=url-rels&lt;/url&gt;" dest="3">
			<expression>http://musicbrainz.org/artist/(.+)</expression>
		</RegExp>
	</NfoUrl>
	<ResolveIDToUrl dest="3">
		<RegExp input="$$1" output="&lt;url&gt;http://musicbrainz.org/ws/2/artist/\1?inc=url-rels&lt;/url&gt;" dest="3">
			<expression>(.+)</expression>
		</RegExp>
	</ResolveIDToUrl>

        <!-- input:     $1=query string -->
	<!-- returns:   the url we should use to do the search -->
	<CreateArtistSearchUrl dest="3">
	  <RegExp input="$$1" output="&lt;url&gt;http://home.henrik.org:7654/cgi-bin/createsearchurl.cgi?type=artist&amp;name=\1$$4&lt;/url&gt;" dest="3">
	    <RegExp input="$$2" output="%20(\1)" dest="4">
	      <expression clear="yes">(.+)</expression>
	    </RegExp>
	    <expression/>
	  </RegExp>
	</CreateArtistSearchUrl>

	<!-- input:     $1=html $2=search query -->
	<!-- returns:   results in xml format <results><movie><title>*</title><url>*</url>*#urls<extra>*</extra></movie>*</results> -->
	<GetArtistSearchResults dest="1">
	  <RegExp input="$$1" output="\1" dest="1">
	    <expression noclean="1"/>
	  </RegExp>
	</GetArtistSearchResults>

	<GetArtistDetails dest="3" clearbuffers="no">
		<RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<!--MBID - Artist-->
			<RegExp input="$$1" output="\1" dest="8">
				<expression noclean="1">&lt;artist(?:\stype=&quot;[^&quot;]*&quot;)*\sid=&quot;([^&quot;]*)&quot;&gt;&lt;name&gt;([^&lt;]*)</expression>
			</RegExp>
			<RegExp input="$$1" output="\1" dest="8+">
				<expression noclean="1">&lt;artist\sid=&quot;([^&quot;]*)&quot;(?:\stype=&quot;[^&quot;]*&quot;)*&gt;&lt;name&gt;([^&lt;]*)</expression>
			</RegExp>
			<!--AMGID - Artist-->
			<RegExp input="$$1" output="\2" dest="9">
				<expression noclean="1">&gt;http://(www.)?allmusic.com/artist/([^&lt;]*)</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;musicBrainzArtistID&gt;\1&lt;/musicBrainzArtistID&gt;&lt;name&gt;\2&lt;/name&gt;" dest="5">
				<expression noclean="1">&lt;artist(?:\stype=&quot;[^&quot;]*&quot;)* id=&quot;([^&quot;]*)&quot;&gt;&lt;name&gt;([^&lt;]*)</expression>
			</RegExp>
			<RegExp input="$$8" conditional="fanarttvthumbs" output="&lt;chain function=&quot;GetFanartTvArtistThumbsByMBID&quot;&gt;\1&lt;/chain&gt;" dest="5+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$8" conditional="tadbthumbs" output="&lt;chain function=&quot;GetTADBArtistThumbsByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$8" conditional="htbthumbs" output="&lt;chain function=&quot;GetHTBThumbsByMBID&quot;&gt;\1&lt;/chain&gt;" dest="5+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$8" conditional="fanarttvfanart" output="&lt;chain function=&quot;GetFanartTvArtistFanartsByMBID&quot;&gt;\1&lt;/chain&gt;" dest="5+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$8" conditional="tadbfanart" output="&lt;chain function=&quot;GetTADBArtistFanartsByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$8" conditional="htbfanart" output="&lt;chain function=&quot;GetHTBFanartByMBID&quot;&gt;\1&lt;/chain&gt;" dest="5+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$9" output="&lt;chain function=&quot;GetAMGData&quot;&gt;\1&lt;/chain&gt;" dest="5+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$9" output="&lt;chain function=&quot;AMGFallback&quot;&gt;\1&lt;/chain&gt;" dest="5+">
				<expression noclean="1">^$</expression>
			</RegExp>
			<RegExp input="$INFO[discogsource]" output="&lt;chain function=&quot;GetMBDiscographyByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>MusicBrainz</expression>
			</RegExp>
			<RegExp input="$INFO[lifespansource]" output="&lt;chain function=&quot;GetMBLafeSpanByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>MusicBrainz</expression>
			</RegExp>
			<RegExp input="$INFO[biogsource]" output="&lt;chain function=&quot;GetTADBBiographyByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<RegExp input="$INFO[genressource]" output="&lt;chain function=&quot;GetTADBArtistGenresByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<RegExp input="$INFO[stylessource]" output="&lt;chain function=&quot;GetTADBArtistStylesByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<RegExp input="$INFO[moodssource]" output="&lt;chain function=&quot;GetTADBArtistMoodsByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<RegExp input="$INFO[discogsource]" output="&lt;chain function=&quot;GetTADBDiscographyByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<RegExp input="$INFO[lifespansource]" output="&lt;chain function=&quot;GetTADBLifeSpanByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetArtistDetails>

	<GetAMGData dest="5" clearbuffers="no">
		<RegExp input="$$2" output="&lt;details&gt;\1&lt;/details&gt;" dest="5">
			<RegExp input="$$1" output="\1" dest="9">
				<expression/>
			</RegExp>
			<RegExp input="" output="" dest="2">
				<expression />
			</RegExp>
			<RegExp input="$INFO[discogsource]" output="&lt;chain function=&quot;GetAMGDiscographyByAMGID&quot;&gt;$$9&lt;/chain&gt;" dest="2">
				<expression>allmusic.com</expression>
			</RegExp>
			<RegExp input="$INFO[lifespansource]" output="&lt;chain function=&quot;GetAMGArtistLifeSpanByAMGID&quot;&gt;$$9&lt;/chain&gt;" dest="2+">
				<expression>allmusic.com</expression>
			</RegExp>
			<RegExp input="$INFO[biogsource]" output="&lt;chain function=&quot;GetAMGBiographyByAMGID&quot;&gt;$$9&lt;/chain&gt;" dest="2+">
				<expression>allmusic.com</expression>
			</RegExp>
			<RegExp input="$INFO[genressource]" output="&lt;chain function=&quot;GetAMGArtistGenresByAMGID&quot;&gt;$$9&lt;/chain&gt;" dest="2+">
				<expression>allmusic.com</expression>
			</RegExp>
			<RegExp input="$INFO[stylessource]" output="&lt;chain function=&quot;GetAMGArtistStylesByAMGID&quot;&gt;$$9&lt;/chain&gt;" dest="2+">
				<expression>allmusic.com</expression>
			</RegExp>
			<RegExp input="$INFO[moodssource]" output="&lt;chain function=&quot;GetAMGArtistMoodsByAMGID&quot;&gt;$$9&lt;/chain&gt;" dest="2+">
				<expression>allmusic.com</expression>
			</RegExp>
			<RegExp input="$INFO[yearsasource]" output="&lt;chain function=&quot;GetAMGArtistYearsActiveByAMGID&quot;&gt;$$9&lt;/chain&gt;" dest="2+">
				<expression>allmusic.com</expression>
			</RegExp>
			<RegExp input="$$9" conditional="allmusicartistthumbs" output="&lt;chain function=&quot;GetAMGArtistThumbsByAMGID&quot;&gt;\1&lt;/chain&gt;" dest="2+">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<expression noclean="1" />
		</RegExp>
	</GetAMGData>

	<AMGFallback dest="5" clearbuffers="no">
		<RegExp input="$$11" output="&lt;details&gt;\1&lt;/details&gt;" dest="5">
			<RegExp input="$INFO[discogfbsource]" output="&lt;chain function=&quot;GetMBDiscographyByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="11+">
				<expression>MusicBrainz</expression>
			</RegExp>
			<RegExp input="$INFO[lifespanfbsource]" output="&lt;chain function=&quot;GetMBLafeSpanByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="11+">
				<expression>MusicBrainz</expression>
			</RegExp>
			<RegExp input="$INFO[stylesfbsource]" output="&lt;chain function=&quot;GetTADBArtistStylesByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<RegExp input="$INFO[moodsfbsource]" output="&lt;chain function=&quot;GetTADBArtistMoodsByMBID&quot;&gt;$$8&lt;/chain&gt;" dest="5+">
				<expression>TheAudioDb.com</expression>
			</RegExp>
			<expression noclean="1" />
		</RegExp>
	</AMGFallback>

</scraper>
